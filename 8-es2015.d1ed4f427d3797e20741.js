(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"2a21":function(t,e,n){"use strict";n.r(e),n.d(e,"PostDetailsModule",(function(){return St}));var s=n("3Pt+"),o=n("AcyG"),c=n("PCNd"),i=n("tyNb");function r(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function a(t){return function e(n){return 0===arguments.length||r(n)?e:t.apply(this,arguments)}}var l=a((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)})),m=a((function(t){return null!=t&&"function"==typeof t.clone?t.clone():function t(e,n,s,o){var c,i=function(c){for(var i=n.length,r=0;r<i;){if(e===n[r])return s[r];r+=1}for(var a in n[r+1]=e,s[r+1]=c,e)c[a]=o?t(e[a],n,s,!0):e[a];return c};switch(l(e)){case"Object":return i({});case"Array":return i([]);case"Date":return new Date(e.valueOf());case"RegExp":return c=e,new RegExp(c.source,(c.global?"g":"")+(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.sticky?"y":"")+(c.unicode?"u":""));default:return e}}(t,[],[],!0)})),p=n("quSY"),b=n("VRyK"),u=n("lJxs"),h=n("/uUt"),d=n("eIep"),C=n("SxV6"),f=n("pLZG"),g=n("zONo"),y=n("XKO9"),z=n("OQLM"),T=n("B0Pf");let k=(()=>{class t{constructor(t){this.postId=t}}return t.type="[Post Details] Get",t})(),w=(()=>{class t{constructor(t,e){this.postId=t,this.sortBy=e}}return t.type="[Post Details] Get Post Comments",t})();const I=t=>t.postDetails,O=t=>I(t).post,v=t=>I(t).comments;var S=n("fXoL"),E=n("Cfvw"),j=n("bO7i"),U=n("I/3d");let D=(()=>{class t{constructor(t){this.firestore=t}getPostDetails(t){return this.firestore.collection("posts").doc(t).get().pipe(Object(u.a)(t=>{const e=Object(j.a)(t.data());return e.id=t.id,e}))}saveComment(t,e,n,s){const o={comment:t,uuid:e,parentDocId:n,createdAt:new Date,likesCount:0,dislikesCount:0};return Object(E.a)(this.firestore.collection("posts").doc(s).collection("comments").add(o))}getComments(t,e){const{orderByField:n,orderByDirection:s}=g.b[e];return this.firestore.collection("posts").doc(t).collection("comments",t=>t.orderBy(n,s)).get().pipe(Object(u.a)(e=>function(t,e){const n=t.filter(t=>t.parentDocId===e);return n.forEach(e=>function t(e,n){n.childComments=e.filter(t=>t.parentDocId===n.id),n.childComments.forEach(n=>{t(e,n)})}(t,e)),n}(e.docs.map(t=>{const e=(n=t.data(),Object.assign(Object.assign({},n),{createdAt:n.createdAt.toDate(),shouldShowChildComments:!0,shouldShowReplyTo:!1}));var n;return e.id=t.id,e}),t)))}}return t.\u0275fac=function(e){return new(e||t)(S.Zb(U.a))},t.\u0275prov=S.Lb({token:t,factory:t.\u0275fac}),t})();var R=n("ofXK"),V=n("JA5x"),A=n("eHCX"),P=n("OzZK"),L=n("C2AL"),B=n("FwiY"),M=n("Mean"),$=n("RwU8"),N=n("xDUJ"),G=n("JK/P"),Q=n("B+r4"),F=n("ocnv"),x=n("PTRe"),W=n("sYmb");function J(t,e){1&t&&(S.Tb(0),S.Cc(1),S.hc(2,"translate"),S.Sb()),2&t&&(S.Cb(1),S.Ec(" ",S.ic(2,1,"ERROR.MAXLENGTH")," "))}function Y(t,e){1&t&&(S.Tb(0),S.Cc(1),S.hc(2,"translate"),S.Sb()),2&t&&(S.Cb(1),S.Ec(" ",S.ic(2,1,"ERROR.MINLENGTH")," "))}function q(t,e){1&t&&(S.Tb(0),S.Cc(1),S.hc(2,"translate"),S.Sb()),2&t&&(S.Cb(1),S.Ec(" ",S.ic(2,1,"ERROR.REQUIRED")," "))}function K(t,e){if(1&t&&(S.Ac(0,J,3,3,"ng-container",8),S.Ac(1,Y,3,3,"ng-container",8),S.Ac(2,q,3,3,"ng-container",8)),2&t){const t=e.$implicit;S.mc("ngIf",t.hasError("maxlength")),S.Cb(1),S.mc("ngIf",t.hasError("minlength")),S.Cb(1),S.mc("ngIf",t.hasError("required"))}}let X=(()=>{class t{constructor(t,e){this.store=t,this.modalService=e,this.saveComment=new S.o,this.cancel=new S.o,this.replyToFormGroup=new s.f({comment:new s.c(null,[s.q.required,s.q.minLength(10),s.q.maxLength(300)])})}onSubmit(){Object(N.a)(this.replyToFormGroup),this.replyToFormGroup.valid&&(this.saveComment.emit(this.replyToFormGroup.value.comment),this.replyToFormGroup.reset())}onCancel(){this.replyToFormGroup.dirty?this.modalService.cancelEditing().pipe(Object(f.a)(Boolean)).subscribe(()=>{this.cancel.emit()}):this.cancel.emit()}}return t.\u0275fac=function(e){return new(e||t)(S.Pb(o.h),S.Pb(G.a))},t.\u0275cmp=S.Jb({type:t,selectors:[["app-comment-reply-to"]],hostAttrs:[1,"db"],outputs:{saveComment:"saveComment",cancel:"cancel"},decls:16,vars:8,consts:[[3,"formGroup","ngSubmit"],[3,"nzErrorTip"],["nz-input","","formControlName","comment","placeholder","Comment"],["nz-button","","type","button",1,"mr4",3,"click"],["nz-icon","","nzType","close"],["nz-button","","nzType","primary","type","submit"],["nz-icon","","nzType","save"],["inputErrorsTemplate",""],[4,"ngIf"]],template:function(t,e){if(1&t&&(S.Vb(0,"form",0),S.dc("ngSubmit",(function(){return e.onSubmit()})),S.Vb(1,"nz-form-item"),S.Vb(2,"nz-form-control",1),S.Qb(3,"textarea",2),S.Ub(),S.Ub(),S.Vb(4,"nz-form-item"),S.Vb(5,"nz-form-control"),S.Vb(6,"button",3),S.dc("click",(function(){return e.onCancel()})),S.Qb(7,"i",4),S.Cc(8),S.hc(9,"translate"),S.Ub(),S.Vb(10,"button",5),S.Qb(11,"i",6),S.Cc(12),S.hc(13,"translate"),S.Ub(),S.Ub(),S.Ub(),S.Ub(),S.Ac(14,K,3,3,"ng-template",null,7,S.Bc)),2&t){const t=S.tc(15);S.mc("formGroup",e.replyToFormGroup),S.Cb(2),S.mc("nzErrorTip",t),S.Cb(6),S.Ec(" ",S.ic(9,4,"ADD.CANCEL")," "),S.Cb(4),S.Ec(" ",S.ic(13,6,"ADD.SUBMIT")," ")}},directives:[s.r,s.n,s.g,Q.c,F.c,Q.a,F.a,x.b,s.b,s.m,s.e,P.a,$.a,L.a,B.a,R.l],pipes:[W.c],encapsulation:2}),t})();var Z=n("5vDB"),H=n("zAKX"),_=n("R0Ic"),tt=n("ZVAZ");function et(t,e){if(1&t){const t=S.Wb();S.Vb(0,"app-comment-reply-to",10),S.dc("cancel",(function(){S.uc(t);const e=S.gc().$implicit;return S.gc().hideReplyTo(e)}))("saveComment",(function(e){S.uc(t);const n=S.gc().$implicit;return S.gc().onSaveComment(e,n.id)})),S.Ub()}2&t&&S.mc("@inOut",void 0)}function nt(t,e){1&t&&(S.Tb(0),S.Qb(1,"i",13),S.Cc(2),S.hc(3,"translate"),S.Sb()),2&t&&(S.Cb(2),S.Ec(" ",S.ic(3,1,"COMMENTS.HIDE")," "))}function st(t,e){1&t&&(S.Tb(0),S.Qb(1,"i",14),S.Cc(2),S.hc(3,"translate"),S.Sb()),2&t&&(S.Cb(2),S.Ec(" ",S.ic(3,1,"COMMENTS.VIEW")," "))}function ot(t,e){if(1&t){const t=S.Wb();S.Vb(0,"app-post-comments",15),S.dc("saveComment",(function(e){return S.uc(t),S.gc(3).saveComment.emit(e)})),S.Ub()}if(2&t){const t=S.gc(2).$implicit,e=S.gc();S.mc("@inOut",void 0)("postId",e.postId)("comments",t.childComments)}}const ct=function(t){return{count:t}};function it(t,e){if(1&t){const t=S.Wb();S.Tb(0),S.Vb(1,"button",11),S.dc("click",(function(){S.uc(t);const e=S.gc().$implicit;return S.gc().toggleShowChildComments(e)})),S.Vb(2,"span"),S.Ac(3,nt,4,3,"ng-container",9),S.Ac(4,st,4,3,"ng-container",9),S.Cc(5),S.hc(6,"translate"),S.Ub(),S.Ub(),S.Ac(7,ot,1,3,"app-post-comments",12),S.Sb()}if(2&t){const t=S.gc().$implicit;S.Cb(3),S.mc("ngIf",t.shouldShowChildComments),S.Cb(1),S.mc("ngIf",!t.shouldShowChildComments),S.Cb(1),S.Ec(" ",S.jc(6,4,1===t.childComments.length?"COMMENTS.REPLY":"COMMENTS.REPLIES",S.pc(7,ct,t.childComments.length))," "),S.Cb(2),S.mc("ngIf",t.shouldShowChildComments)}}function rt(t,e){if(1&t){const t=S.Wb();S.Vb(0,"nz-comment",1),S.hc(1,"date"),S.Vb(2,"nz-comment-content"),S.Vb(3,"p"),S.Cc(4),S.Ub(),S.Ub(),S.Vb(5,"nz-comment-action"),S.Vb(6,"button",2),S.dc("click",(function(){S.uc(t);const n=e.$implicit;return S.gc().like(n)})),S.Qb(7,"i",3),S.hc(8,"async"),S.Vb(9,"span",4),S.Cc(10),S.Ub(),S.Ub(),S.Ub(),S.Vb(11,"nz-comment-action"),S.Vb(12,"button",2),S.dc("click",(function(){S.uc(t);const n=e.$implicit;return S.gc().dislike(n)})),S.Qb(13,"i",5),S.hc(14,"async"),S.Vb(15,"span",6),S.Cc(16),S.Ub(),S.Ub(),S.Ub(),S.Vb(17,"nz-comment-action"),S.Vb(18,"button",2),S.dc("click",(function(){S.uc(t);const n=e.$implicit;return S.gc().showReplyTo(n)})),S.Qb(19,"i",7),S.Cc(20),S.hc(21,"translate"),S.Ub(),S.Ub(),S.Ac(22,et,1,1,"app-comment-reply-to",8),S.Ac(23,it,8,9,"ng-container",9),S.Ub()}if(2&t){const t=e.$implicit,n=S.gc();S.nc("nzDatetime",S.jc(1,9,t.createdAt,"medium")),S.Cb(4),S.Ec(" ",t.comment," "),S.Cb(3),S.mc("nzTheme",S.ic(8,12,n.doesUserLikesComment$(t.id))?"fill":"outline"),S.Cb(3),S.Dc(t.likesCount),S.Cb(3),S.mc("nzTheme",S.ic(14,14,n.doesUserDislikesComment$(t.id))?"fill":"outline"),S.Cb(3),S.Dc(t.dislikesCount),S.Cb(4),S.Ec(" ",S.ic(21,16,"REPLY")," "),S.Cb(2),S.mc("ngIf",t.shouldShowReplyTo),S.Cb(1),S.mc("ngIf",t.childComments&&t.childComments.length)}}let at=(()=>{class t{constructor(t){this.store=t,this.cancelComment=new S.o,this.saveComment=new S.o}showReplyTo(t){t.shouldShowReplyTo=!0}hideReplyTo(t){t.shouldShowReplyTo=!1}toggleShowChildComments(t){t.shouldShowChildComments=!t.shouldShowChildComments}doesUserLikesComment$(t){return this.store.select(Object(T.b)(t))}doesUserDislikesComment$(t){return this.store.select(Object(T.a)(t))}like(t){const e=this.store.selectSnapshot(y.b);this.doesUserLikesComment$(t.id).pipe(Object(C.a)()).subscribe(n=>{n?(this.store.dispatch(new z.b(e,this.postId,t.id)),t.likesCount--):(this.store.dispatch(new z.h(e,this.postId,t.id)),t.likesCount++,this.doesUserDislikesComment$(t.id).pipe(Object(C.a)(),Object(f.a)(Boolean)).subscribe(()=>{this.store.dispatch(new z.a(e,this.postId,t.id)),t.dislikesCount--}))})}dislike(t){const e=this.store.selectSnapshot(y.b);this.doesUserDislikesComment$(t.id).pipe(Object(C.a)()).subscribe(n=>{n?(this.store.dispatch(new z.a(e,this.postId,t.id)),t.dislikesCount--):(this.store.dispatch(new z.c(e,this.postId,t.id)),t.dislikesCount++,this.doesUserLikesComment$(t.id).pipe(Object(C.a)(),Object(f.a)(Boolean)).subscribe(()=>{this.store.dispatch(new z.b(e,this.postId,t.id)),t.likesCount--}))})}onSaveComment(t,e){this.saveComment.emit({comment:t,parentDocId:e})}}return t.\u0275fac=function(e){return new(e||t)(S.Pb(o.h))},t.\u0275cmp=S.Jb({type:t,selectors:[["app-post-comments"]],hostAttrs:[1,"db"],inputs:{comments:"comments",postId:"postId",parentDocId:"parentDocId",shouldShowReplyTo:"shouldShowReplyTo"},outputs:{cancelComment:"cancelComment",saveComment:"saveComment"},decls:1,vars:1,consts:[[3,"nzDatetime",4,"ngFor","ngForOf"],[3,"nzDatetime"],["nz-button","","nzType","link",3,"click"],["nz-tooltip","","nzTitle","Like","nz-icon","","nzType","like",3,"nzTheme"],[1,"count","like"],["nz-tooltip","","nzTitle","Dislike","nz-icon","","nzType","dislike",3,"nzTheme"],[1,"count","dislike"],["nz-icon","","nzType","comment"],["class","db ph3-ns",3,"cancel","saveComment",4,"ngIf"],[4,"ngIf"],[1,"db","ph3-ns",3,"cancel","saveComment"],["nz-button","","nzType","link",1,"mb2",3,"click"],[3,"postId","comments","saveComment",4,"ngIf"],["nz-icon","","nzType","up","nzTheme","outline"],["nz-icon","","nzType","down","nzTheme","outline"],[3,"postId","comments","saveComment"]],template:function(t,e){1&t&&S.Ac(0,rt,24,18,"nz-comment",0),2&t&&S.mc("ngForOf",e.comments)},directives:[R.k,tt.b,tt.c,tt.a,P.a,L.a,B.a,R.l,X,t],pipes:[R.e,R.b,W.c],encapsulation:2,data:{animation:[Object(_.l)("inOut",[Object(_.k)(":enter",[Object(_.j)({transform:"translateY(-10%)",opacity:0}),Object(_.e)(300)]),Object(_.k)(":leave",[Object(_.e)(300,Object(_.j)({transform:"translateY(-10%)",opacity:0}))])])]}}),t})();const lt=function(t,e,n){return[t,e,n]};function mt(t,e){if(1&t&&(S.Vb(0,"nz-card",7),S.Vb(1,"p",8),S.Cc(2),S.Ub(),S.Vb(3,"time",9),S.Cc(4),S.hc(5,"date"),S.Ub(),S.Ub()),2&t){const t=S.gc(),e=S.tc(2),n=S.tc(4),s=S.tc(6);S.mc("nzLoading",!t.post)("nzTitle",null==t.post?null:t.post.title)("nzActions",S.rc(8,lt,e,n,s)),S.Cb(2),S.Ec(" ",null==t.post?null:t.post.message," "),S.Cb(2),S.Ec(" ",S.jc(5,5,null==t.post?null:t.post.createdAt,"medium")," ")}}function pt(t,e){if(1&t){const t=S.Wb();S.Vb(0,"button",10),S.dc("click",(function(){return S.uc(t),S.gc().like()})),S.Qb(1,"i",11),S.hc(2,"async"),S.Cc(3),S.Ub()}if(2&t){const t=S.gc();S.Cb(1),S.mc("nzTheme",S.ic(2,2,t.doesUserLikePost$)?"fill":"outline"),S.Cb(2),S.Ec(" ",null==t.post?null:t.post.likesCount," ")}}function bt(t,e){if(1&t){const t=S.Wb();S.Vb(0,"button",10),S.dc("click",(function(){return S.uc(t),S.gc().dislike()})),S.Qb(1,"i",12),S.hc(2,"async"),S.Cc(3),S.Ub()}if(2&t){const t=S.gc();S.Cb(1),S.mc("nzTheme",S.ic(2,2,t.doesUserDislikePost$)?"fill":"outline"),S.Cb(2),S.Ec(" ",null==t.post?null:t.post.dislikesCount," ")}}function ut(t,e){if(1&t){const t=S.Wb();S.Vb(0,"button",10),S.dc("click",(function(){return S.uc(t),S.gc().showReplyTo()})),S.Qb(1,"i",13),S.Cc(2),S.hc(3,"translate"),S.Ub()}2&t&&(S.Cb(2),S.Ec(" ",S.ic(3,1,"REPLY")," "))}function ht(t,e){if(1&t){const t=S.Wb();S.Vb(0,"nz-result",14),S.hc(1,"translate"),S.Vb(2,"div",15),S.Vb(3,"button",16),S.dc("click",(function(){return S.uc(t),S.gc().getPostDetails()})),S.Cc(4),S.hc(5,"translate"),S.Ub(),S.Ub(),S.Ub()}2&t&&(S.mc("nzTitle",S.ic(1,2,"MESSAGES.FAILED")),S.Cb(4),S.Ec(" ",S.ic(5,4,"RETRY")," "))}function dt(t,e){if(1&t){const t=S.Wb();S.Vb(0,"app-comment-reply-to",17),S.dc("cancel",(function(){return S.uc(t),S.gc().hideReplyTo()}))("saveComment",(function(e){S.uc(t);const n=S.gc();return n.saveComment(e,n.postId)})),S.Ub()}}function Ct(t,e){if(1&t){const t=S.Wb();S.Vb(0,"app-post-comments",23),S.dc("saveComment",(function(e){return S.uc(t),S.gc(2).saveComment(e.comment,e.parentDocId)})),S.Ub()}if(2&t){const t=S.gc(2);S.mc("comments",t.comments)("postId",t.postId)}}const ft=function(t){return{count:t}};function gt(t,e){if(1&t&&(S.Tb(0),S.Qb(1,"nz-divider",18),S.hc(2,"translate"),S.Vb(3,"div",19),S.Cc(4),S.hc(5,"translate"),S.Vb(6,"nz-select",20),S.Qb(7,"nz-option",21),S.hc(8,"translate"),S.Qb(9,"nz-option",21),S.hc(10,"translate"),S.Qb(11,"nz-option",21),S.hc(12,"translate"),S.Ub(),S.Ub(),S.Ac(13,Ct,1,2,"app-post-comments",22),S.Sb()),2&t){const t=S.gc();S.Cb(1),S.mc("nzText",S.ic(2,10,"COMMENTS.COMMENTS")),S.Cb(3),S.Ec(" ",S.jc(5,12,1===t.comments.length?"COMMENTS.REPLY":"COMMENTS.REPLIES",S.pc(21,ft,t.comments.length))," "),S.Cb(2),S.mc("formControl",t.sortBy),S.Cb(1),S.mc("nzValue",t.SortBy.MostLikes)("nzLabel",S.ic(8,15,t.SortBy.MostLikes)),S.Cb(2),S.mc("nzValue",t.SortBy.MostDislikes)("nzLabel",S.ic(10,17,t.SortBy.MostDislikes)),S.Cb(2),S.mc("nzValue",t.SortBy.NewestPosts)("nzLabel",S.ic(12,19,t.SortBy.NewestPosts)),S.Cb(2),S.mc("ngIf",t.post&&t.comments)}}const yt=[{path:":id",component:(()=>{class t{constructor(t,e,n){this.route=t,this.store=e,this.postDetailsService=n,this.shouldShowReplyTo=!0,this.hasError=!1,this.SortBy=g.a,this.sortBy=new s.c(g.a.MostLikes),this.subscription=new p.a}ngOnInit(){const t=this.route.params.pipe(Object(u.a)(t=>(this.postId=t.id,this.postId)),Object(h.a)());this.subscription.add(t.subscribe(()=>{this.getPostDetails()})),this.subscription.add(this.store.select(O).subscribe(t=>{this.post=m(t)})),this.subscription.add(this.store.select(v).subscribe(t=>{this.comments=m(t)})),this.subscription.add(Object(b.a)(t,this.sortBy.valueChanges).pipe(Object(d.a)(()=>this.store.dispatch(new w(this.postId,this.sortBy.value)))).subscribe()),this.doesUserLikePost$=t.pipe(Object(d.a)(t=>this.store.select(Object(T.b)(t)))),this.doesUserDislikePost$=t.pipe(Object(d.a)(t=>this.store.select(Object(T.a)(t))))}ngOnDestroy(){this.subscription.unsubscribe()}showReplyTo(){this.shouldShowReplyTo=!0}hideReplyTo(){this.shouldShowReplyTo=!1}like(){const t=this.store.selectSnapshot(y.b);this.doesUserLikePost$.pipe(Object(C.a)()).subscribe(e=>{e?(this.store.dispatch(new z.b(t,this.postId)),this.post.likesCount--):(this.store.dispatch(new z.h(t,this.postId)),this.post.likesCount++,this.doesUserDislikePost$.pipe(Object(C.a)(),Object(f.a)(Boolean)).subscribe(()=>{this.store.dispatch(new z.a(t,this.postId)),this.post.dislikesCount--}))})}dislike(){const t=this.store.selectSnapshot(y.b);this.doesUserDislikePost$.pipe(Object(C.a)()).subscribe(e=>{e?(this.store.dispatch(new z.a(t,this.postId)),this.post.dislikesCount--):(this.store.dispatch(new z.c(t,this.postId)),this.post.dislikesCount++,this.doesUserLikePost$.pipe(Object(C.a)(),Object(f.a)(Boolean)).subscribe(()=>{this.store.dispatch(new z.b(t,this.postId)),this.post.likesCount--}))})}saveComment(t,e){this.postDetailsService.saveComment(t,this.store.selectSnapshot(y.b),e,this.postId).subscribe(()=>{this.store.dispatch(new w(this.postId,this.sortBy.value))})}getPostDetails(){this.store.dispatch(new k(this.postId)).subscribe(()=>{this.hasError=!1},()=>{this.hasError=!0}),this.store.dispatch(new w(this.postId,this.sortBy.value))}}return t.\u0275fac=function(e){return new(e||t)(S.Pb(i.a),S.Pb(o.h),S.Pb(D))},t.\u0275cmp=S.Jb({type:t,selectors:[["app-post-details-home"]],hostAttrs:[1,"db","bg-white"],decls:10,vars:4,consts:[["class","w-100",3,"nzLoading","nzTitle","nzActions",4,"ngIf"],["actionLike",""],["actionDislike",""],["actionComment",""],["nzStatus","warning",3,"nzTitle",4,"ngIf"],["class","db ph3 pt3 pb1",3,"cancel","saveComment",4,"ngIf"],[4,"ngIf"],[1,"w-100",3,"nzLoading","nzTitle","nzActions"],["nz-typography",""],["nz-typography","","nzType","secondary"],["nz-button","","nzType","link",1,"w-100",3,"click"],["nz-icon","","nzType","like",3,"nzTheme"],["nz-icon","","nzType","dislike",3,"nzTheme"],["nz-icon","","nzType","comment"],["nzStatus","warning",3,"nzTitle"],["nz-result-extra",""],["nz-button","","nzType","primary",3,"click"],[1,"db","ph3","pt3","pb1",3,"cancel","saveComment"],[3,"nzText"],[1,"ph3","flex","justify-between"],[3,"formControl"],[3,"nzValue","nzLabel"],[3,"comments","postId","saveComment",4,"ngIf"],[3,"comments","postId","saveComment"]],template:function(t,e){1&t&&(S.Ac(0,mt,6,12,"nz-card",0),S.Ac(1,pt,4,4,"ng-template",null,1,S.Bc),S.Ac(3,bt,4,4,"ng-template",null,2,S.Bc),S.Ac(5,ut,4,3,"ng-template",null,3,S.Bc),S.Ac(7,ht,6,6,"nz-result",4),S.Ac(8,dt,1,0,"app-comment-reply-to",5),S.Ac(9,gt,14,23,"ng-container",6)),2&t&&(S.mc("ngIf",!e.hasError),S.Cb(7),S.mc("ngIf",!e.post&&e.hasError),S.Cb(1),S.mc("ngIf",e.shouldShowReplyTo&&!e.hasError),S.Cb(1),S.mc("ngIf",e.comments&&e.comments.length&&!e.hasError))},directives:[R.l,V.a,A.a,P.a,L.a,B.a,M.a,M.b,$.a,X,Z.a,H.b,s.m,s.d,H.a,at],pipes:[R.e,R.b,W.c],encapsulation:2}),t})()}];let zt=(()=>{class t{}return t.\u0275mod=S.Nb({type:t}),t.\u0275inj=S.Mb({factory:function(e){return new(e||t)},imports:[[i.i.forChild(yt)],i.i]}),t})();var Tt=n("mrSG"),kt=n("vkgz"),wt=n("JIr8"),It=n("EBwW");const Ot={post:null,comments:[]};let vt=(()=>{let t=class{constructor(t){this.postDetailsSerivce=t}getPostDetails(t,e){return t.patchState({post:null}),this.postDetailsSerivce.getPostDetails(e.postId).pipe(Object(kt.a)(e=>{if(!e)throw e;t.patchState({post:e})}),Object(wt.a)(e=>{throw t.dispatch(new It.a),e}))}getPostComments(t,e){return this.postDetailsSerivce.getComments(e.postId,e.sortBy).pipe(Object(kt.a)(e=>{t.patchState({comments:e})}),Object(wt.a)(e=>{throw t.dispatch(new It.a),e}))}};return t.\u0275fac=function(e){return new(e||t)(S.Zb(D))},t.\u0275prov=S.Lb({token:t,factory:t.\u0275fac}),Object(Tt.b)([Object(o.a)(k)],t.prototype,"getPostDetails",null),Object(Tt.b)([Object(o.a)(w)],t.prototype,"getPostComments",null),t=Object(Tt.b)([Object(o.f)({name:"postDetails",defaults:Object.assign({},Ot)})],t),t})(),St=(()=>{class t{}return t.\u0275mod=S.Nb({type:t}),t.\u0275inj=S.Mb({factory:function(e){return new(e||t)},providers:[D],imports:[[c.a,zt,s.h,s.p,o.e.forFeature([vt])]]}),t})()}}]);