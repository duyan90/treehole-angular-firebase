!function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{xZLo:function(t,i,s){"use strict";s.r(i),s.d(i,"PostsModule",(function(){return nt}));var o=s("AcyG"),c=s("3Pt+"),r=s("PCNd"),a=s("tyNb"),u=s("n90j"),l=s("quSY"),b=s("zONo"),h=s("Jsfd"),f=s("XKO9"),g=s("B0Pf"),p=function(){var t=function t(e,i){n(this,t),this.language=e,this.sortBy=i};return t.type="[Posts] Get",t}(),d=function(){var t=function t(e){n(this,t),this.pageIndex=e};return t.type="[Posts] Change Page Index",t}(),z=function(){var t=function t(e){n(this,t),this.pageSize=e};return t.type="[Posts] Change Page Size",t}(),m=function(t){return t.posts},y=function(t){return m(t).posts},k=Object(o.k)([y],(function(t){return t.length})),P=function(t){return m(t).pageSize},v=Object(o.k)([y,function(t){return m(t).pageIndex},P],(function(t,e,n){return t.slice((e-1)*n,e*n)})),C=s("fXoL"),S=s("YaLo"),T=s("ofXK"),w=s("Ff2k"),O=s("3/1E"),U=s("zAKX"),B=s("OzZK"),I=s("C2AL"),L=s("FwiY"),j=s("Mean"),x=s("RwU8"),F=s("sYmb");function D(t,e){if(1&t&&(C.Ub(0,"form",6),C.Ub(1,"nz-select",7),C.Pb(2,"nz-option",8),C.gc(3,"translate"),C.Pb(4,"nz-option",8),C.gc(5,"translate"),C.Pb(6,"nz-option",8),C.gc(7,"translate"),C.Pb(8,"nz-option",8),C.gc(9,"translate"),C.Pb(10,"nz-option",8),C.gc(11,"translate"),C.Tb(),C.Tb()),2&t){var n=C.fc();C.lc("formGroup",n.searchForm),C.Cb(2),C.lc("nzValue",n.SortBy.NewestPosts)("nzLabel",C.hc(3,11,n.SortBy.NewestPosts)),C.Cb(2),C.lc("nzValue",n.SortBy.OldestPosts)("nzLabel",C.hc(5,13,n.SortBy.OldestPosts)),C.Cb(2),C.lc("nzValue",n.SortBy.MostLikes)("nzLabel",C.hc(7,15,n.SortBy.MostLikes)),C.Cb(2),C.lc("nzValue",n.SortBy.MostDislikes)("nzLabel",C.hc(9,17,n.SortBy.MostDislikes)),C.Cb(2),C.lc("nzValue",n.SortBy.MostComments)("nzLabel",C.hc(11,19,n.SortBy.MostComments))}}var $=function(t){return["/post",t]};function E(t,e){if(1&t){var n=C.Vb();C.Ub(0,"nz-list-item",9),C.Ub(1,"nz-list-item-meta"),C.Ub(2,"nz-list-item-meta-title"),C.Ub(3,"a",10),C.Dc(4),C.Tb(),C.Tb(),C.Ub(5,"nz-list-item-meta-description"),C.Dc(6),C.gc(7,"date"),C.Tb(),C.Tb(),C.Ub(8,"a",10),C.Dc(9),C.Tb(),C.Ub(10,"ul",11),C.Ub(11,"nz-list-item-action"),C.Ub(12,"button",12),C.cc("click",(function(){C.tc(n);var t=e.$implicit;return C.fc().like(t)})),C.Pb(13,"i",13),C.gc(14,"async"),C.Dc(15),C.Tb(),C.Tb(),C.Ub(16,"nz-list-item-action"),C.Ub(17,"button",12),C.cc("click",(function(){C.tc(n);var t=e.$implicit;return C.fc().dislike(t)})),C.Pb(18,"i",14),C.gc(19,"async"),C.Dc(20),C.Tb(),C.Tb(),C.Ub(21,"nz-list-item-action"),C.Ub(22,"a",10),C.Pb(23,"i",15),C.Dc(24),C.Tb(),C.Tb(),C.Tb(),C.Tb()}if(2&t){var i=e.$implicit,s=C.fc();C.lc("nzNoFlex",!0),C.Cb(3),C.lc("routerLink",C.oc(19,$,i.id)),C.Cb(1),C.Ec(i.title),C.Cb(2),C.Fc(" ",C.ic(7,12,i.createdAt,"medium")," "),C.Cb(2),C.lc("routerLink",C.oc(21,$,i.id)),C.Cb(1),C.Ec(i.message),C.Cb(4),C.lc("nzTheme",C.hc(14,15,s.doesUserLikesComment$(i.id))?"fill":"outline"),C.Cb(2),C.Fc(" ",i.likesCount," "),C.Cb(3),C.lc("nzTheme",C.hc(19,17,s.doesUserDislikesComment$(i.id))?"fill":"outline"),C.Cb(2),C.Fc(" ",i.dislikesCount," "),C.Cb(2),C.lc("routerLink",C.oc(23,$,i.id)),C.Cb(2),C.Fc(" ",i.commentsCount," ")}}function N(t,e){if(1&t){var n=C.Vb();C.Ub(0,"nz-result",16),C.gc(1,"translate"),C.Ub(2,"div",17),C.Ub(3,"button",18),C.cc("click",(function(){return C.tc(n),C.fc().getPosts()})),C.Dc(4),C.gc(5,"translate"),C.Tb(),C.Tb(),C.Tb()}2&t&&(C.lc("nzTitle",C.hc(1,2,"MESSAGES.FAILED")),C.Cb(4),C.Fc(" ",C.hc(5,4,"RETRY")," "))}var M,V,A,G,Y,K=[{path:"",component:(M=function(){function t(e,i,s){n(this,t),this.store=e,this.actions=i,this.likeDislikeService=s,this.posts=[],this.searchForm=new c.f({sortBy:new c.c(b.a.NewestPosts)}),this.SortBy=b.a,this.loading=!0,this.hasError=!1,this.subscription=new l.a}return e(t,[{key:"ngOnInit",value:function(){var t=this;this.getPosts(),this.subscription.add(this.actions.pipe(Object(o.o)(h.a)).subscribe((function(){t.getPosts()}))),this.subscription.add(this.searchForm.get("sortBy").valueChanges.subscribe((function(){t.getPosts()}))),this.subscription.add(this.store.select(v).subscribe((function(e){t.posts=Object(u.a)(e)}))),this.totalPostNumber$=this.store.select(k),this.pageSize$=this.store.select(P),this.pageIndex$=this.store.select(P)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"getPosts",value:function(){var t=this;this.store.dispatch(new p(this.store.selectSnapshot(f.a),this.searchForm.value.sortBy)).subscribe((function(){t.loading=!1,t.hasError=!1}),(function(){t.loading=!1,t.hasError=!0}))}},{key:"onPageIndexChange",value:function(t){this.store.dispatch(new d(t))}},{key:"onPageSizeChange",value:function(t){this.store.dispatch(new z(t))}},{key:"doesUserLikesComment$",value:function(t){return this.store.select(Object(g.b)(t))}},{key:"doesUserDislikesComment$",value:function(t){return this.store.select(Object(g.a)(t))}},{key:"like",value:function(t){this.likeDislikeService.like(this.doesUserLikesComment$(t.id),this.doesUserDislikesComment$(t.id),t)}},{key:"dislike",value:function(t){this.likeDislikeService.dislike(this.doesUserLikesComment$(t.id),this.doesUserDislikesComment$(t.id),t)}}]),t}(),M.\u0275fac=function(t){return new(t||M)(C.Ob(o.h),C.Ob(o.b),C.Ob(S.a))},M.\u0275cmp=C.Ib({type:M,selectors:[["app-posts-home"]],decls:9,vars:14,consts:[["class","mb3",3,"formGroup",4,"ngIf"],["nzItemLayout","vertical",1,"bg-white",3,"nzLoading","nzBordered"],[3,"nzNoFlex",4,"ngFor","ngForOf"],[1,"tc","mt3"],["nzShowSizeChanger","",3,"nzPageIndex","nzPageSize","nzTotal","nzPageSizeChang","nzPageIndexChange"],["nzStatus","warning",3,"nzTitle",4,"ngIf"],[1,"mb3",3,"formGroup"],["formControlName","sortBy"],[3,"nzValue","nzLabel"],[3,"nzNoFlex"],[3,"routerLink"],["nz-list-item-actions",""],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","like",3,"nzTheme"],["nz-icon","","nzType","dislike",3,"nzTheme"],["nz-icon","","nzType","comment"],["nzStatus","warning",3,"nzTitle"],["nz-result-extra",""],["nz-button","","nzType","primary",3,"click"]],template:function(t,e){1&t&&(C.Bc(0,D,12,21,"form",0),C.Ub(1,"nz-list",1),C.Bc(2,E,25,25,"nz-list-item",2),C.Tb(),C.Ub(3,"div",3),C.Ub(4,"nz-pagination",4),C.cc("nzPageSizeChang",(function(t){return e.onPageSizeChange(t)}))("nzPageIndexChange",(function(t){return e.onPageIndexChange(t)})),C.gc(5,"async"),C.gc(6,"async"),C.gc(7,"async"),C.Tb(),C.Tb(),C.Bc(8,N,6,6,"nz-result",5)),2&t&&(C.lc("ngIf",!e.loading&&!e.hasError),C.Cb(1),C.lc("nzLoading",e.loading)("nzBordered",!0),C.Cb(1),C.lc("ngForOf",e.posts),C.Cb(2),C.lc("nzPageIndex",C.hc(5,8,e.pageIndex$))("nzPageSize",C.hc(6,10,e.pageSize$))("nzTotal",C.hc(7,12,e.totalPostNumber$)),C.Cb(4),C.lc("ngIf",!e.loading&&e.hasError))},directives:[T.l,w.a,T.k,O.a,c.r,c.n,c.g,U.b,c.m,c.e,U.a,w.d,w.e,w.g,a.h,w.f,w.c,w.b,B.a,I.a,L.a,j.a,j.b,x.a],pipes:[T.b,F.c,T.e],styles:[""]}),M),data:{reuse:!0}}],J=((V=function t(){n(this,t)}).\u0275mod=C.Mb({type:V}),V.\u0275inj=C.Lb({factory:function(t){return new(t||V)},imports:[[a.i.forChild(K)],a.i]}),V),X=s("lJxs"),R=s("bO7i"),Z=s("I/3d"),q=((A=function(){function t(e){n(this,t),this.firestore=e}return e(t,[{key:"getPosts",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=b.b[e],s=i.orderByField,o=i.orderByDirection;return this.firestore.collection("posts",(function(e){var i=e.where("language","==",t).orderBy(s,o);return n&&(i=e.startAfter(n)),i})).get().pipe(Object(X.a)((function(t){return t.docs.map((function(t){var e=Object(R.a)(t.data());return e.id=t.id,e}))})))}}]),t}()).\u0275fac=function(t){return new(t||A)(C.Yb(Z.a))},A.\u0275prov=C.Kb({token:A,factory:A.\u0275fac}),A),W=s("mrSG"),H=s("vkgz"),Q=s("JIr8"),_=s("EBwW"),tt={posts:null,pageIndex:1,pageSize:10},et=((Y=function(){function t(e){n(this,t),this.postsSerivce=e}return e(t,[{key:"getPosts",value:function(t,e){return t.patchState({posts:null}),this.postsSerivce.getPosts(e.language,e.sortBy).pipe(Object(H.a)((function(e){if(!e||!e.length)throw e;t.patchState({posts:e})})),Object(Q.a)((function(e){throw t.dispatch(new _.a),e})))}},{key:"changePostsPageIndex",value:function(t,e){t.patchState({pageIndex:e.pageIndex})}},{key:"changePostsPageNumber",value:function(t,e){t.patchState({pageSize:e.pageSize})}}]),t}()).\u0275fac=function(t){return new(t||Y)(C.Yb(q))},Y.\u0275prov=C.Kb({token:Y,factory:Y.\u0275fac}),Object(W.a)([Object(o.a)(p)],Y.prototype,"getPosts",null),Object(W.a)([Object(o.a)(d)],Y.prototype,"changePostsPageIndex",null),Object(W.a)([Object(o.a)(z)],Y.prototype,"changePostsPageNumber",null),Y=Object(W.a)([Object(o.f)({name:"posts",defaults:Object.assign({},tt)})],Y)),nt=((G=function t(){n(this,t)}).\u0275mod=C.Mb({type:G}),G.\u0275inj=C.Lb({factory:function(t){return new(t||G)},providers:[q],imports:[[r.a,J,o.e.forFeature([et]),c.h,c.p]]}),G)}}])}();