!function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{xZLo:function(t,i,o){"use strict";o.r(i),o.d(i,"PostsModule",(function(){return _}));var s=o("AcyG"),a=o("3Pt+"),r=o("PCNd"),c=o("tyNb"),u=o("quSY"),b=o("Jsfd"),l=o("XKO9"),h=o("zONo"),p=function(){var t=function t(e,i){n(this,t),this.language=e,this.sortBy=i};return t.type="[Posts] Get",t}(),f=function(){var t=function t(e){n(this,t),this.pageIndex=e};return t.type="[Posts] Change Page Index",t}(),g=function(){var t=function t(e){n(this,t),this.pageSize=e};return t.type="[Posts] Change Page Size",t}(),z=function(t){return t.posts},d=function(t){return z(t).posts},m=Object(s.k)([d],(function(t){return t.length})),y=function(t){return z(t).pageSize},C=Object(s.k)([d,function(t){return z(t).pageIndex},y],(function(t,e,n){return t.slice((e-1)*n,e*n)})),P=o("fXoL"),v=o("ofXK"),S=o("Ff2k"),w=o("3/1E"),k=o("zAKX"),O=o("C2AL"),I=o("FwiY"),V=o("Mean"),B=o("OzZK"),x=o("RwU8"),L=o("sYmb");function j(t,e){if(1&t&&(P.Vb(0,"form",6),P.Vb(1,"nz-select",7),P.Qb(2,"nz-option",8),P.hc(3,"translate"),P.Qb(4,"nz-option",8),P.hc(5,"translate"),P.Qb(6,"nz-option",8),P.hc(7,"translate"),P.Qb(8,"nz-option",8),P.hc(9,"translate"),P.Qb(10,"nz-option",8),P.hc(11,"translate"),P.Ub(),P.Ub()),2&t){var n=P.gc();P.mc("formGroup",n.searchForm),P.Cb(2),P.mc("nzValue",n.SortBy.NewestPosts)("nzLabel",P.ic(3,11,n.SortBy.NewestPosts)),P.Cb(2),P.mc("nzValue",n.SortBy.OldestPosts)("nzLabel",P.ic(5,13,n.SortBy.OldestPosts)),P.Cb(2),P.mc("nzValue",n.SortBy.MostLikes)("nzLabel",P.ic(7,15,n.SortBy.MostLikes)),P.Cb(2),P.mc("nzValue",n.SortBy.MostDislikes)("nzLabel",P.ic(9,17,n.SortBy.MostDislikes)),P.Cb(2),P.mc("nzValue",n.SortBy.MostComments)("nzLabel",P.ic(11,19,n.SortBy.MostComments))}}var U=function(t){return["/post",t]};function E(t,e){if(1&t&&(P.Vb(0,"nz-list-item",9),P.Vb(1,"nz-list-item-meta"),P.Vb(2,"nz-list-item-meta-title"),P.Vb(3,"a",10),P.Cc(4),P.Ub(),P.Ub(),P.Vb(5,"nz-list-item-meta-description"),P.Cc(6),P.hc(7,"date"),P.Ub(),P.Ub(),P.Vb(8,"a",10),P.Cc(9),P.Ub(),P.Vb(10,"ul",11),P.Vb(11,"nz-list-item-action"),P.Qb(12,"i",12),P.Cc(13),P.Ub(),P.Vb(14,"nz-list-item-action"),P.Qb(15,"i",13),P.Cc(16),P.Ub(),P.Vb(17,"nz-list-item-action"),P.Vb(18,"a",10),P.Qb(19,"i",14),P.Cc(20),P.Ub(),P.Ub(),P.Ub(),P.Ub()),2&t){var n=e.$implicit;P.mc("nzNoFlex",!0),P.Cb(3),P.mc("routerLink",P.pc(13,U,n.id)),P.Cb(1),P.Dc(n.title),P.Cb(2),P.Ec(" ",P.jc(7,10,n.createdAt,"medium")," "),P.Cb(2),P.mc("routerLink",P.pc(15,U,n.id)),P.Cb(1),P.Dc(n.message),P.Cb(4),P.Ec(" ",n.likesCount," "),P.Cb(3),P.Ec(" ",n.dislikesCount," "),P.Cb(2),P.mc("routerLink",P.pc(17,U,n.id)),P.Cb(2),P.Ec(" ",n.commentsCount," ")}}function N(t,e){if(1&t){var n=P.Wb();P.Vb(0,"nz-result",15),P.hc(1,"translate"),P.Vb(2,"div",16),P.Vb(3,"button",17),P.dc("click",(function(){return P.uc(n),P.gc().getPosts()})),P.Cc(4),P.hc(5,"translate"),P.Ub(),P.Ub(),P.Ub()}2&t&&(P.mc("nzTitle",P.ic(1,2,"MESSAGES.FAILED")),P.Cb(4),P.Ec(" ",P.ic(5,4,"RETRY")," "))}var F,M,T,A,Q,D=[{path:"",component:(F=function(){function t(e,i){n(this,t),this.store=e,this.actions=i,this.posts=[],this.searchForm=new a.f({sortBy:new a.c(h.a.NewestPosts)}),this.SortBy=h.a,this.loading=!0,this.hasError=!1,this.subscription=new u.a}return e(t,[{key:"ngOnInit",value:function(){var t=this;this.getPosts(),this.subscription.add(this.actions.pipe(Object(s.o)(b.a)).subscribe((function(){t.getPosts()}))),this.subscription.add(this.searchForm.get("sortBy").valueChanges.subscribe((function(){t.getPosts()}))),this.subscription.add(this.store.select(C).subscribe((function(e){t.posts=e}))),this.totalPostNumber$=this.store.select(m),this.pageSize$=this.store.select(y),this.pageIndex$=this.store.select(y)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"getPosts",value:function(){var t=this;this.store.dispatch(new p(this.store.selectSnapshot(l.a),this.searchForm.value.sortBy)).subscribe((function(){t.loading=!1,t.hasError=!1}),(function(){t.loading=!1,t.hasError=!0}))}},{key:"onPageIndexChange",value:function(t){this.store.dispatch(new f(t))}},{key:"onPageSizeChange",value:function(t){this.store.dispatch(new g(t))}}]),t}(),F.\u0275fac=function(t){return new(t||F)(P.Pb(s.h),P.Pb(s.b))},F.\u0275cmp=P.Jb({type:F,selectors:[["app-posts-home"]],decls:9,vars:14,consts:[["class","mb3",3,"formGroup",4,"ngIf"],["nzItemLayout","vertical",1,"bg-white",3,"nzLoading","nzBordered"],[3,"nzNoFlex",4,"ngFor","ngForOf"],[1,"tc","mt3"],["nzShowSizeChanger","",3,"nzPageIndex","nzPageSize","nzTotal","nzPageSizeChang","nzPageIndexChange"],["nzStatus","warning",3,"nzTitle",4,"ngIf"],[1,"mb3",3,"formGroup"],["formControlName","sortBy"],[3,"nzValue","nzLabel"],[3,"nzNoFlex"],[3,"routerLink"],["nz-list-item-actions",""],["nz-icon","","nzType","like"],["nz-icon","","nzType","dislike"],["nz-icon","","nzType","comment"],["nzStatus","warning",3,"nzTitle"],["nz-result-extra",""],["nz-button","","nzType","primary",3,"click"]],template:function(t,e){1&t&&(P.Ac(0,j,12,21,"form",0),P.Vb(1,"nz-list",1),P.Ac(2,E,21,19,"nz-list-item",2),P.Ub(),P.Vb(3,"div",3),P.Vb(4,"nz-pagination",4),P.dc("nzPageSizeChang",(function(t){return e.onPageSizeChange(t)}))("nzPageIndexChange",(function(t){return e.onPageIndexChange(t)})),P.hc(5,"async"),P.hc(6,"async"),P.hc(7,"async"),P.Ub(),P.Ub(),P.Ac(8,N,6,6,"nz-result",5)),2&t&&(P.mc("ngIf",!e.loading&&!e.hasError),P.Cb(1),P.mc("nzLoading",e.loading)("nzBordered",!0),P.Cb(1),P.mc("ngForOf",e.posts),P.Cb(2),P.mc("nzPageIndex",P.ic(5,8,e.pageIndex$))("nzPageSize",P.ic(6,10,e.pageSize$))("nzTotal",P.ic(7,12,e.totalPostNumber$)),P.Cb(4),P.mc("ngIf",!e.loading&&e.hasError))},directives:[v.l,S.a,v.k,w.a,a.r,a.n,a.g,k.b,a.m,a.e,k.a,S.d,S.e,S.g,c.h,S.f,S.c,S.b,O.a,I.a,V.a,V.b,B.a,x.a],pipes:[v.b,L.c,v.e],styles:[""]}),F),data:{reuse:!0}}],G=((M=function t(){n(this,t)}).\u0275mod=P.Nb({type:M}),M.\u0275inj=P.Mb({factory:function(t){return new(t||M)},imports:[[c.i.forChild(D)],c.i]}),M),$=o("lJxs"),J=o("bO7i"),K=o("I/3d"),X=((T=function(){function t(e){n(this,t),this.firestore=e}return e(t,[{key:"getPosts",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=h.b[e],o=i.orderByField,s=i.orderByDirection;return this.firestore.collection("posts",(function(e){var i=e.where("language","==",t).orderBy(o,s);return n&&(i=e.startAfter(n)),i})).get().pipe(Object($.a)((function(t){return t.docs.map((function(t){var e=Object(J.a)(t.data());return e.id=t.id,e}))})))}}]),t}()).\u0275fac=function(t){return new(t||T)(P.Zb(K.a))},T.\u0275prov=P.Lb({token:T,factory:T.\u0275fac}),T),Y=o("mrSG"),Z=o("vkgz"),R=o("JIr8"),W=o("EBwW"),q={posts:null,pageIndex:1,pageSize:10},H=((Q=function(){function t(e){n(this,t),this.postsSerivce=e}return e(t,[{key:"getPosts",value:function(t,e){return t.patchState({posts:null}),this.postsSerivce.getPosts(e.language,e.sortBy).pipe(Object(Z.a)((function(e){if(!e||!e.length)throw e;t.patchState({posts:e})})),Object(R.a)((function(e){throw t.dispatch(new W.a),e})))}},{key:"changePostsPageIndex",value:function(t,e){t.patchState({pageIndex:e.pageIndex})}},{key:"changePostsPageNumber",value:function(t,e){t.patchState({pageSize:e.pageSize})}}]),t}()).\u0275fac=function(t){return new(t||Q)(P.Zb(X))},Q.\u0275prov=P.Lb({token:Q,factory:Q.\u0275fac}),Object(Y.b)([Object(s.a)(p)],Q.prototype,"getPosts",null),Object(Y.b)([Object(s.a)(f)],Q.prototype,"changePostsPageIndex",null),Object(Y.b)([Object(s.a)(g)],Q.prototype,"changePostsPageNumber",null),Q=Object(Y.b)([Object(s.f)({name:"posts",defaults:Object.assign({},q)})],Q)),_=((A=function t(){n(this,t)}).\u0275mod=P.Nb({type:A}),A.\u0275inj=P.Mb({factory:function(t){return new(t||A)},providers:[X],imports:[[r.a,G,s.e.forFeature([H]),a.h,a.p]]}),A)}}])}();