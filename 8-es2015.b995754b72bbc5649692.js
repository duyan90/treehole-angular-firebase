(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{NELs:function(t,n,e){"use strict";e.r(n),e.d(n,"AddPostModule",(function(){return q}));var r=e("3Pt+"),o=e("AcyG"),c=e("PCNd"),s=e("tyNb"),a=e("pLZG"),i=e("xDUJ"),l=e("EBwW"),b=e("XKO9");let u=(()=>{class t{constructor(t,n,e,r){this.title=t,this.message=n,this.uuid=e,this.language=r}}return t.type="[Add Post] Save",t})();var d=e("fXoL"),m=e("ofXK"),h=e("JK/P"),p=e("ocnv"),f=e("B+r4"),g=e("PTRe"),z=e("OzZK"),C=e("RwU8"),v=e("C2AL"),w=e("FwiY"),S=e("sYmb");function T(t,n){1&t&&(d.Sb(0),d.Dc(1),d.gc(2,"translate"),d.Rb()),2&t&&(d.Cb(1),d.Fc(" ",d.hc(2,1,"ERROR.MAXLENGTH")," "))}function E(t,n){1&t&&(d.Sb(0),d.Dc(1),d.gc(2,"translate"),d.Rb()),2&t&&(d.Cb(1),d.Fc(" ",d.hc(2,1,"ERROR.MINLENGTH")," "))}function y(t,n){1&t&&(d.Sb(0),d.Dc(1),d.gc(2,"translate"),d.Rb()),2&t&&(d.Cb(1),d.Fc(" ",d.hc(2,1,"ERROR.REQUIRED")," "))}function L(t,n){if(1&t&&(d.Bc(0,T,3,3,"ng-container",12),d.Bc(1,E,3,3,"ng-container",12),d.Bc(2,y,3,3,"ng-container",12)),2&t){const t=n.$implicit;d.lc("ngIf",t.hasError("maxlength")),d.Cb(1),d.lc("ngIf",t.hasError("minlength")),d.Cb(1),d.lc("ngIf",t.hasError("required"))}}const P=[{path:"",component:(()=>{class t{constructor(t,n,e){this.store=t,this.location=n,this.modalService=e,this.addForm=new r.f({title:new r.c(null,[r.q.required,r.q.minLength(10),r.q.maxLength(200)]),message:new r.c(null,[r.q.required,r.q.minLength(50),r.q.maxLength(1e3)])}),this.isLoading=!1}savePost(){Object(i.a)(this.addForm),this.addForm.valid&&(this.isLoading=!0,this.store.dispatch(new u(this.addForm.value.title,this.addForm.value.message,this.store.selectSnapshot(b.b),this.store.selectSnapshot(b.a))).subscribe(()=>{this.store.dispatch(new l.b),this.location.back(),this.isLoading=!1}))}onCancel(){this.addForm.dirty?this.modalService.cancelEditing().pipe(Object(a.a)(Boolean)).subscribe(()=>{this.location.back()}):this.location.back()}}return t.\u0275fac=function(n){return new(n||t)(d.Ob(o.h),d.Ob(m.h),d.Ob(h.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-add-post-home"]],decls:24,vars:24,consts:[["nz-form","",3,"formGroup","ngSubmit"],["nzRequired","","nzFor","title",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["type","text","nz-input","","minlength","10","maxlength","200","formControlName","title","id","title"],["nzFor","message","nzRequired","",3,"nzSm","nzXs"],["rows","5","nz-input","","id","message","formControlName","message","minlength","50","maxlength","1000"],[1,"justify-center"],["nz-button","","nzSize","large","type","button",1,"mr4",3,"click"],["nz-icon","","nzType","left"],["nz-button","","nzSize","large","nzType","primary","type","submit",3,"nzLoading"],["nz-icon","","nzType","save"],["inputErrorsTemplate",""],[4,"ngIf"]],template:function(t,n){if(1&t&&(d.Ub(0,"form",0),d.cc("ngSubmit",(function(){return n.savePost()})),d.Ub(1,"nz-form-item"),d.Ub(2,"nz-form-label",1),d.Dc(3),d.gc(4,"translate"),d.Tb(),d.Ub(5,"nz-form-control",2),d.Pb(6,"input",3),d.Tb(),d.Tb(),d.Ub(7,"nz-form-item"),d.Ub(8,"nz-form-label",4),d.Dc(9),d.gc(10,"translate"),d.Tb(),d.Ub(11,"nz-form-control",2),d.Pb(12,"textarea",5),d.Tb(),d.Tb(),d.Ub(13,"nz-form-item",6),d.Ub(14,"button",7),d.cc("click",(function(){return n.onCancel()})),d.Pb(15,"i",8),d.Dc(16),d.gc(17,"translate"),d.Tb(),d.Ub(18,"button",9),d.Pb(19,"i",10),d.Dc(20),d.gc(21,"translate"),d.Tb(),d.Tb(),d.Tb(),d.Bc(22,L,3,3,"ng-template",null,11,d.Cc)),2&t){const t=d.sc(23);d.lc("formGroup",n.addForm),d.Cb(2),d.lc("nzSm",6)("nzXs",24),d.Cb(1),d.Fc(" ",d.hc(4,16,"ADD.TITLE")," "),d.Cb(2),d.lc("nzSm",14)("nzXs",24)("nzErrorTip",t),d.Cb(3),d.lc("nzSm",6)("nzXs",24),d.Cb(1),d.Fc(" ",d.hc(10,18,"ADD.MESSAGE")," "),d.Cb(2),d.lc("nzSm",14)("nzXs",24)("nzErrorTip",t),d.Cb(5),d.Fc(" ",d.hc(17,20,"ADD.CANCEL")," "),d.Cb(2),d.lc("nzLoading",n.isLoading),d.Cb(2),d.Fc(" ",d.hc(21,22,"ADD.SUBMIT")," ")}},directives:[r.r,r.n,p.b,r.g,f.c,p.c,f.a,p.d,p.a,g.b,r.b,r.j,r.i,r.m,r.e,z.a,C.a,v.a,w.a,m.l],pipes:[S.c],encapsulation:2}),t})()}];let D=(()=>{class t{}return t.\u0275mod=d.Mb({type:t}),t.\u0275inj=d.Lb({factory:function(n){return new(n||t)},imports:[[s.i.forChild(P)],s.i]}),t})();var F=e("Cfvw"),R=e("I/3d");let O=(()=>{class t{constructor(t){this.firestore=t}savePost(t,n,e,r){const o={title:t,message:n,language:r,createdAt:new Date,likesCount:0,commentsCount:0,dislikesCount:0,uuid:e};return Object(F.a)(this.firestore.collection("posts").add(o))}}return t.\u0275fac=function(n){return new(n||t)(d.Yb(R.a))},t.\u0275prov=d.Kb({token:t,factory:t.\u0275fac}),t})();var A=e("mrSG"),U=e("vkgz"),j=e("JIr8");let k=(()=>{let t=class{constructor(t){this.addPostService=t}saveAddedPost(t,n){this.addPostService.savePost(n.title,n.message,n.uuid,n.language).pipe(Object(U.a)(()=>t.dispatch(new l.b)),Object(j.a)(n=>{throw t.dispatch(new l.a),n}))}};return t.\u0275fac=function(n){return new(n||t)(d.Yb(O))},t.\u0275prov=d.Kb({token:t,factory:t.\u0275fac}),Object(A.a)([Object(o.a)(u)],t.prototype,"saveAddedPost",null),t=Object(A.a)([Object(o.f)({name:"addPost",defaults:null})],t),t})(),q=(()=>{class t{}return t.\u0275mod=d.Mb({type:t}),t.\u0275inj=d.Lb({factory:function(n){return new(n||t)},providers:[O],imports:[[c.a,D,r.h,r.p,o.e.forFeature([k])]]}),t})()}}]);