(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{xZLo:function(t,e,s){"use strict";s.r(e),s.d(e,"PostsModule",(function(){return X}));var n=s("AcyG"),o=s("3Pt+"),i=s("PCNd"),r=s("tyNb"),a=s("quSY"),c=s("Jsfd"),b=s("XKO9"),l=s("zONo");let u=(()=>{class t{constructor(t,e){this.language=t,this.sortBy=e}}return t.type="[Posts] Get",t})(),h=(()=>{class t{constructor(t){this.pageIndex=t}}return t.type="[Posts] Change Page Index",t})(),p=(()=>{class t{constructor(t){this.pageSize=t}}return t.type="[Posts] Change Page Size",t})();const g=t=>t.posts,z=t=>g(t).posts,d=Object(n.k)([z],t=>t.length),m=t=>g(t).pageSize,f=Object(n.k)([z,t=>g(t).pageIndex,m],(t,e,s)=>t.slice((e-1)*s,e*s));var C=s("fXoL"),y=s("ofXK"),P=s("Ff2k"),S=s("3/1E"),w=s("zAKX"),O=s("C2AL"),I=s("FwiY"),V=s("Mean"),k=s("OzZK"),B=s("RwU8"),x=s("sYmb");function L(t,e){if(1&t&&(C.Vb(0,"form",6),C.Vb(1,"nz-select",7),C.Qb(2,"nz-option",8),C.hc(3,"translate"),C.Qb(4,"nz-option",8),C.hc(5,"translate"),C.Qb(6,"nz-option",8),C.hc(7,"translate"),C.Qb(8,"nz-option",8),C.hc(9,"translate"),C.Qb(10,"nz-option",8),C.hc(11,"translate"),C.Ub(),C.Ub()),2&t){const t=C.gc();C.mc("formGroup",t.searchForm),C.Cb(2),C.mc("nzValue",t.SortBy.NewestPosts)("nzLabel",C.ic(3,11,t.SortBy.NewestPosts)),C.Cb(2),C.mc("nzValue",t.SortBy.OldestPosts)("nzLabel",C.ic(5,13,t.SortBy.OldestPosts)),C.Cb(2),C.mc("nzValue",t.SortBy.MostLikes)("nzLabel",C.ic(7,15,t.SortBy.MostLikes)),C.Cb(2),C.mc("nzValue",t.SortBy.MostDislikes)("nzLabel",C.ic(9,17,t.SortBy.MostDislikes)),C.Cb(2),C.mc("nzValue",t.SortBy.MostComments)("nzLabel",C.ic(11,19,t.SortBy.MostComments))}}const U=function(t){return["/post",t]};function j(t,e){if(1&t&&(C.Vb(0,"nz-list-item",9),C.Vb(1,"nz-list-item-meta"),C.Vb(2,"nz-list-item-meta-title"),C.Vb(3,"a",10),C.Cc(4),C.Ub(),C.Ub(),C.Vb(5,"nz-list-item-meta-description"),C.Cc(6),C.hc(7,"date"),C.Ub(),C.Ub(),C.Vb(8,"a",10),C.Cc(9),C.Ub(),C.Vb(10,"ul",11),C.Vb(11,"nz-list-item-action"),C.Qb(12,"i",12),C.Cc(13),C.Ub(),C.Vb(14,"nz-list-item-action"),C.Qb(15,"i",13),C.Cc(16),C.Ub(),C.Vb(17,"nz-list-item-action"),C.Vb(18,"a",10),C.Qb(19,"i",14),C.Cc(20),C.Ub(),C.Ub(),C.Ub(),C.Ub()),2&t){const t=e.$implicit;C.mc("nzNoFlex",!0),C.Cb(3),C.mc("routerLink",C.pc(13,U,t.id)),C.Cb(1),C.Dc(t.title),C.Cb(2),C.Ec(" ",C.jc(7,10,t.createdAt,"medium")," "),C.Cb(2),C.mc("routerLink",C.pc(15,U,t.id)),C.Cb(1),C.Dc(t.message),C.Cb(4),C.Ec(" ",t.likesCount," "),C.Cb(3),C.Ec(" ",t.dislikesCount," "),C.Cb(2),C.mc("routerLink",C.pc(17,U,t.id)),C.Cb(2),C.Ec(" ",t.commentsCount," ")}}function v(t,e){if(1&t){const t=C.Wb();C.Vb(0,"nz-result",15),C.hc(1,"translate"),C.Vb(2,"div",16),C.Vb(3,"button",17),C.dc("click",(function(){return C.uc(t),C.gc().getPosts()})),C.Cc(4),C.hc(5,"translate"),C.Ub(),C.Ub(),C.Ub()}2&t&&(C.mc("nzTitle",C.ic(1,2,"MESSAGES.FAILED")),C.Cb(4),C.Ec(" ",C.ic(5,4,"RETRY")," "))}const E=[{path:"",component:(()=>{class t{constructor(t,e){this.store=t,this.actions=e,this.posts=[],this.searchForm=new o.f({sortBy:new o.c(l.a.NewestPosts)}),this.SortBy=l.a,this.loading=!0,this.hasError=!1,this.subscription=new a.a}ngOnInit(){this.getPosts(),this.subscription.add(this.actions.pipe(Object(n.o)(c.a)).subscribe(()=>{this.getPosts()})),this.subscription.add(this.searchForm.get("sortBy").valueChanges.subscribe(()=>{this.getPosts()})),this.subscription.add(this.store.select(f).subscribe(t=>{this.posts=t})),this.totalPostNumber$=this.store.select(d),this.pageSize$=this.store.select(m),this.pageIndex$=this.store.select(m)}ngOnDestroy(){this.subscription.unsubscribe()}getPosts(){this.store.dispatch(new u(this.store.selectSnapshot(b.a),this.searchForm.value.sortBy)).subscribe(()=>{this.loading=!1,this.hasError=!1},()=>{this.loading=!1,this.hasError=!0})}onPageIndexChange(t){this.store.dispatch(new h(t))}onPageSizeChange(t){this.store.dispatch(new p(t))}}return t.\u0275fac=function(e){return new(e||t)(C.Pb(n.h),C.Pb(n.b))},t.\u0275cmp=C.Jb({type:t,selectors:[["app-posts-home"]],decls:9,vars:14,consts:[["class","mb3",3,"formGroup",4,"ngIf"],["nzItemLayout","vertical",1,"bg-white",3,"nzLoading","nzBordered"],[3,"nzNoFlex",4,"ngFor","ngForOf"],[1,"tc","mt3"],["nzShowSizeChanger","",3,"nzPageIndex","nzPageSize","nzTotal","nzPageSizeChang","nzPageIndexChange"],["nzStatus","warning",3,"nzTitle",4,"ngIf"],[1,"mb3",3,"formGroup"],["formControlName","sortBy"],[3,"nzValue","nzLabel"],[3,"nzNoFlex"],[3,"routerLink"],["nz-list-item-actions",""],["nz-icon","","nzType","like"],["nz-icon","","nzType","dislike"],["nz-icon","","nzType","comment"],["nzStatus","warning",3,"nzTitle"],["nz-result-extra",""],["nz-button","","nzType","primary",3,"click"]],template:function(t,e){1&t&&(C.Ac(0,L,12,21,"form",0),C.Vb(1,"nz-list",1),C.Ac(2,j,21,19,"nz-list-item",2),C.Ub(),C.Vb(3,"div",3),C.Vb(4,"nz-pagination",4),C.dc("nzPageSizeChang",(function(t){return e.onPageSizeChange(t)}))("nzPageIndexChange",(function(t){return e.onPageIndexChange(t)})),C.hc(5,"async"),C.hc(6,"async"),C.hc(7,"async"),C.Ub(),C.Ub(),C.Ac(8,v,6,6,"nz-result",5)),2&t&&(C.mc("ngIf",!e.loading&&!e.hasError),C.Cb(1),C.mc("nzLoading",e.loading)("nzBordered",!0),C.Cb(1),C.mc("ngForOf",e.posts),C.Cb(2),C.mc("nzPageIndex",C.ic(5,8,e.pageIndex$))("nzPageSize",C.ic(6,10,e.pageSize$))("nzTotal",C.ic(7,12,e.totalPostNumber$)),C.Cb(4),C.mc("ngIf",!e.loading&&e.hasError))},directives:[y.l,P.a,y.k,S.a,o.r,o.n,o.g,w.b,o.m,o.e,w.a,P.d,P.e,P.g,r.h,P.f,P.c,P.b,O.a,I.a,V.a,V.b,k.a,B.a],pipes:[y.b,x.c,y.e],styles:[""]}),t})(),data:{reuse:!0}}];let N=(()=>{class t{}return t.\u0275mod=C.Nb({type:t}),t.\u0275inj=C.Mb({factory:function(e){return new(e||t)},imports:[[r.i.forChild(E)],r.i]}),t})();var F=s("lJxs"),M=s("bO7i"),A=s("I/3d");let T=(()=>{class t{constructor(t){this.firestore=t}getPosts(t="en",e,s=null){const{orderByField:n,orderByDirection:o}=l.b[e];return this.firestore.collection("posts",e=>{let i=e.where("language","==",t).orderBy(n,o);return s&&(i=e.startAfter(s)),i}).get().pipe(Object(F.a)(t=>t.docs.map(t=>{const e=Object(M.a)(t.data());return e.id=t.id,e})))}}return t.\u0275fac=function(e){return new(e||t)(C.Zb(A.a))},t.\u0275prov=C.Lb({token:t,factory:t.\u0275fac}),t})();var Q=s("mrSG"),D=s("vkgz"),G=s("JIr8"),$=s("EBwW");const J={posts:null,pageIndex:1,pageSize:10};let K=(()=>{let t=class{constructor(t){this.postsSerivce=t}getPosts(t,e){return t.patchState({posts:null}),this.postsSerivce.getPosts(e.language,e.sortBy).pipe(Object(D.a)(e=>{if(!e||!e.length)throw e;t.patchState({posts:e})}),Object(G.a)(e=>{throw t.dispatch(new $.a),e}))}changePostsPageIndex(t,e){t.patchState({pageIndex:e.pageIndex})}changePostsPageNumber(t,e){t.patchState({pageSize:e.pageSize})}};return t.\u0275fac=function(e){return new(e||t)(C.Zb(T))},t.\u0275prov=C.Lb({token:t,factory:t.\u0275fac}),Object(Q.b)([Object(n.a)(u)],t.prototype,"getPosts",null),Object(Q.b)([Object(n.a)(h)],t.prototype,"changePostsPageIndex",null),Object(Q.b)([Object(n.a)(p)],t.prototype,"changePostsPageNumber",null),t=Object(Q.b)([Object(n.f)({name:"posts",defaults:Object.assign({},J)})],t),t})(),X=(()=>{class t{}return t.\u0275mod=C.Nb({type:t}),t.\u0275inj=C.Mb({factory:function(e){return new(e||t)},providers:[T],imports:[[i.a,N,n.e.forFeature([K]),o.h,o.p]]}),t})()}}]);